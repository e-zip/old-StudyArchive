# 도커\_chap01

# 도커의 생겨난 배경

- 눈송이 서버 (서로 모양이 다른 서버들이 존재하는 상황)
- 하나의 서버에 여러개의 프로그램을 설치하는 것도 문제 였는데, 서로 사용하는 라이브러리의 버전이 다르거나 동일한 포트 사용시 설치가 까다로워짐
- 가상화 방식에서 발전

## 가상화 vs 도커

- 가상화
  - 기존의 가상화 방식은 OS를 가상화
  - 호스트 OS위에 게스트 OS 전체를 가상화
  - 느리고 운영환경에서 사용하기 힘듬
- 도커
  - 프로세스를 격리하는 방식임
  - 가장 빠르게 동작, 성능적으로 거의 손실이 없음
  - 하나의 서버에 여러개의 컨테이너를 실행하면서 서로 영향을 미치지 않고 독립적으로 실행
  - 컨테이너는 호스트 운영체제의 사용자 공간에 있는 격리 프로세스로 실행중인 다른 컨테이너와 OS 커널 공유
    - 각 컨테이너가 컨테이너별로 특수 가상 머신 내부에서 실행되는 Hyper-V 컨테이너 제외
  - 동일한 커널에서 실행되는 부작용으로 VM(가상머신)보다 격리성이 떨어짐

# 이미지와 컨테이너

## 이미지란?

- 이미지는 컨테이너 실행에 필요한 파일과 설정값등을 포함하는 것
- 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있음
- 이미지는 컨테이너의 파일 시스템이기때문에 애플리케이션을 운영하기 위해 모든 것을 가짐(dependency, configuration, script… etc)
- 도커파일 (`Dockerfile`)으로 부터 이미지를 빌드함
  - 도커파일 : 도커 이미지를 빌드하기 위한 지침을 포함하는 텍스트 파일
  - 빌드 : 해당 Dockerfile에서 제공하는 정보 및 컨텍스트 외에도 이미지를 빌드하는 폴더의 추가 파일에 기반하여 컨테이너 이미지 빌드

```shell
// 도커 빌드하기
docker build [OPTIONS] PATH | URL | -
```

## 컨테이너란?

- Docker 이미지의 인스턴스
- 컨테이너는 단일 애플리케이션 프로세스, 서비스의 실행을 나타냄
- 도커 이미지의 콘텐츠, 실행 환경 및 명령의 표준 집합으로 구성
- 이미지를 실행하는 상태가 될 수 있음
- 컨테이너 실행하기

```Shell
docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG..]
```

- 도커 실행시 (`docker run`)
  - docker pull : 이미지를 다운한다. ( 이미지가 로컬에 없을 시 )
  - docker create : 이미지로부터 컨테이너 생성
  - docker start : 컨테이너 시작
